<mat-card>
  <h1 class="form-title">Add New Car To My Collection</h1>
  <form [formGroup]="carForm" (ngSubmit)="onSubmit()">
    <!-- Información General y Fabricante en dos columnas -->
    <div class="row">
      <mat-expansion-panel class="col">
        <mat-expansion-panel-header>
          <mat-panel-title>General Info</mat-panel-title>
        </mat-expansion-panel-header>
        <div class="section">
          <mat-form-field appearance="outline">
            <mat-label>Name</mat-label>
            <input matInput formControlName="name" required>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Brand</mat-label>
            <mat-select formControlName="brand">
              <mat-option *ngFor="let brand of brands" [value]="brand.brand">
                {{ brand.brand }}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Scale</mat-label>
            <mat-select formControlName="scale" placeholder="Selecciona una escala">
              <mat-option *ngFor="let scale of scales" [value]="scale">
                {{ scale }}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Color</mat-label>
            <input matInput formControlName="color">
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Release Year</mat-label>
            <input matInput type="number" formControlName="year">
          </mat-form-field>
        </div>
      </mat-expansion-panel>

      <mat-expansion-panel class="col" formGroupName="manufacturer">
        <mat-expansion-panel-header>
          <mat-panel-title>Manufacturer Info</mat-panel-title>
        </mat-expansion-panel-header>
        <div class="section">
          <mat-form-field  appearance="outline">
            <mat-label>Name</mat-label>
            <input matInput placeholder="Fantasy / Ferrari...." formControlName="name">
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Manufacturer Country</mat-label>
            <input matInput formControlName="country">
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Real Model Release Year</mat-label>
            <input matInput type="number" formControlName="year">
          </mat-form-field>
        </div>
      </mat-expansion-panel>
    </div>

    <!-- Información Adicional y Serie en dos columnas -->
    <div class="row">
      <mat-expansion-panel class="col">
        <mat-expansion-panel-header>
          <mat-panel-title>Extra Info</mat-panel-title>
        </mat-expansion-panel-header>
        <div class="section">
          <mat-form-field appearance="outline">
            <mat-label>Case</mat-label>
            <input matInput formControlName="case" maxlength="1" placeholder="A">
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Annotations</mat-label>
            <textarea matInput placeholder="This car is..." formControlName="annotation"></textarea>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Photo Link</mat-label>
            <input matInput formControlName="photo" (input)="onPhotoUrlChanged()" placeholder="Please add the link">
          </mat-form-field>
          
          <!-- Vista previa de la foto -->
          <div *ngIf="photoPreview">
            <h3>Photo Preview:</h3>
            <img [src]="photoPreview" alt="Car Photo" style="width: 200px; height: auto;">
          </div>
          

          <mat-form-field appearance="outline">
            <mat-label>Car Code</mat-label>
            <input matInput formControlName="code">
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Type</mat-label>
            <mat-select formControlName="tag">
              <mat-option *ngFor="let tag of tags" [value]="tag">
                {{ tag }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </mat-expansion-panel>

      <mat-expansion-panel class="col" formGroupName="series">
        <mat-expansion-panel-header>
          <mat-panel-title>Serie Info</mat-panel-title>
        </mat-expansion-panel-header>
        <div class="section">
          <mat-form-field appearance="outline">
            <mat-label>Name</mat-label>
            <input matInput placeholder="HW Flames" formControlName="name">
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Number</mat-label>
            <input matInput formControlName="number">
          </mat-form-field>
        </div>
      </mat-expansion-panel>
    </div>

    <button mat-raised-button color="primary" type="submit">Save</button>
  </form>
</mat-card>
